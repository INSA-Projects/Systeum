<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Nachos: machine/interrupt.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.4 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<div class="nav">
<a class="el" href="dir_000003.html">machine</a></div>
<h1>interrupt.h File Reference</h1>Data structures to emulate low-level interrupt hardware. <a href="#_details">More...</a>
<p>
<code>#include &quot;<a class="el" href="copyright_8h-source.html">copyright.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="list_8h-source.html">list.h</a>&quot;</code><br>

<p>
<a href="interrupt_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPendingInterrupt.html">PendingInterrupt</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Defines an interrupt that is scheduled to occur in the future.  <a href="classPendingInterrupt.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInterrupt.html">Interrupt</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Defines a low level interrupt hardware.  <a href="classInterrupt.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8h.html#a13">IntStatus</a> { <a class="el" href="interrupt_8h.html#a13a0">IntOff</a>, 
<a class="el" href="interrupt_8h.html#a13a1">IntOn</a>
 }</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8h.html#a14">MachineStatus</a> { <a class="el" href="interrupt_8h.html#a14a2">IdleMode</a>, 
<a class="el" href="interrupt_8h.html#a14a3">SystemMode</a>, 
<a class="el" href="interrupt_8h.html#a14a4">UserMode</a>
 }</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8h.html#a15">IntType</a> { <br>
&nbsp;&nbsp;<a class="el" href="interrupt_8h.html#a15a5">TimerInt</a>, 
<a class="el" href="interrupt_8h.html#a15a6">DiskInt</a>, 
<a class="el" href="interrupt_8h.html#a15a7">ConsoleWriteInt</a>, 
<a class="el" href="interrupt_8h.html#a15a8">ConsoleReadInt</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="interrupt_8h.html#a15a9">ACIARecInt</a>, 
<a class="el" href="interrupt_8h.html#a15a10">ACIAEmInt</a>, 
<a class="el" href="interrupt_8h.html#a15a11">ACIARecInt2</a>, 
<a class="el" href="interrupt_8h.html#a15a12">ACIAEmInt2</a>
<br>
 }</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Data structures to emulate low-level interrupt hardware. 
<p>
The hardware provides a routine (SetLevel) to enable or disable interrupts.<p>
In order to emulate the hardware, we need to keep track of all interrupts the hardware devices would cause, and when they are supposed to occur.<p>
This module also keeps track of simulated time. Time advances only when the following occur:<ul>
<li>interrupts are re-enabled</li><li>a user instruction is executed</li><li>there is nothing in the ready queue</li></ul>
<p>
As a result, unlike real hardware, interrupts (and thus time-slice context switches) cannot occur anywhere in the code where interrupts are enabled, but rather only at those places in the code where simulated time advances (so that it becomes time to invoke an interrupt in the hardware simulation).<p>
NOTE: this means that incorrectly synchronized code may work fine on this hardware simulation (even with randomized time slices), but it wouldn't work on real hardware. (Just because we can't always detect when your program would fail in real life, does not mean it's ok to write incorrectly synchronized code!)<p>
DO NOT CHANGE -- part of the machine emulation<p>
Copyright (c) 1992-1993 The Regents of the University of California. All rights reserved. See <a class="el" href="copyright_8h.html">copyright.h</a> for copyright notice and limitation of liability and disclaimer of warranty provisions.<hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="a13"></a><!-- doxytag: member="interrupt.h::IntStatus" ref="a13" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">enum <a class="el" href="interrupt_8h.html#a13">IntStatus</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Interrupts can be disabled (IntOff) or enabled (IntOn). 
<p>
<dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="a13a0"></a><!-- doxytag: member="IntOff" ref="a13a0" args="" -->IntOff</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="a13a1"></a><!-- doxytag: member="IntOn" ref="a13a1" args="" -->IntOn</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a15"></a><!-- doxytag: member="interrupt.h::IntType" ref="a15" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">enum <a class="el" href="interrupt_8h.html#a15">IntType</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
IntType records which hardware device generated an interrupt. In Nachos, we support a hardware timer device, a disk, a console display, a keyboard and an <a class="el" href="classACIA.html">ACIA</a>.<dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="a15a5"></a><!-- doxytag: member="TimerInt" ref="a15a5" args="" -->TimerInt</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="a15a6"></a><!-- doxytag: member="DiskInt" ref="a15a6" args="" -->DiskInt</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="a15a7"></a><!-- doxytag: member="ConsoleWriteInt" ref="a15a7" args="" -->ConsoleWriteInt</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="a15a8"></a><!-- doxytag: member="ConsoleReadInt" ref="a15a8" args="" -->ConsoleReadInt</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="a15a9"></a><!-- doxytag: member="ACIARecInt" ref="a15a9" args="" -->ACIARecInt</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="a15a10"></a><!-- doxytag: member="ACIAEmInt" ref="a15a10" args="" -->ACIAEmInt</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="a15a11"></a><!-- doxytag: member="ACIARecInt2" ref="a15a11" args="" -->ACIARecInt2</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="a15a12"></a><!-- doxytag: member="ACIAEmInt2" ref="a15a12" args="" -->ACIAEmInt2</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a14"></a><!-- doxytag: member="interrupt.h::MachineStatus" ref="a14" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">enum <a class="el" href="interrupt_8h.html#a14">MachineStatus</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Nachos can be running kernel code (SystemMode), user code (UserMode), or there can be no runnable thread, because the ready list is empty (IdleMode).<dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="a14a2"></a><!-- doxytag: member="IdleMode" ref="a14a2" args="" -->IdleMode</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="a14a3"></a><!-- doxytag: member="SystemMode" ref="a14a3" args="" -->SystemMode</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="a14a4"></a><!-- doxytag: member="UserMode" ref="a14a4" args="" -->UserMode</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>
    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Mon Oct 17 19:44:18 2005 for Nachos by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.4 </small></address>
</body>
</html>
